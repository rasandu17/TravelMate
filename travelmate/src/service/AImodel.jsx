const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = import.meta.env.GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a JSON-formatted travel plan for a budget-friendly 3-day trip to Las Vegas for a couple, including hotel options and a detailed itinerary with costs and timings.  This is designed to be *realistic* for a cheap budget, meaning it focuses on free/low-cost activities and affordable dining options.\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Getaway for Two\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"currency\": \"USD\",\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"pricePerNight\": 40,\n      \"hotelImageURL\": \"https://www.circuscircus.com/wp-content/uploads/2023/02/Exterior_V2-1920x1080.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1272,\n        \"longitude\": -115.1667\n      },\n      \"rating\": 3.5,\n      \"description\": \"Affordable hotel on the Strip with a circus theme. Features a large indoor amusement park (Adventuredome) and free circus acts. Rooms are basic but clean. Good for those looking for budget-friendly options and entertainment.\",\n      \"amenities\": [\"Pool\", \"Casino\", \"Restaurants\", \"Free Circus Acts\", \"Adventuredome\"]\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"pricePerNight\": 50,\n      \"hotelImageURL\": \"https://www.excalibur.com/content/dam/excalibur/hotel/exterior/excalibur-exterior-day-1280x720.tif\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0985,\n        \"longitude\": -115.1742\n      },\n      \"rating\": 4.0,\n      \"description\": \"A medieval-themed hotel on the south end of the Strip. Offers affordable rooms, a variety of dining options, and a lively casino.  Walking distance to other major attractions.\",\n      \"amenities\": [\"Pool\", \"Casino\", \"Restaurants\", \"Tournament of Kings Dinner Show\"]\n    },\n        {\n      \"hotelName\": \"Strat Hotel, Casino & Skypod\",\n      \"hotelAddress\": \"2000 Las Vegas Blvd S, Las Vegas, NV 89104\",\n      \"pricePerNight\": 45,\n      \"hotelImageURL\": \"https://www.thestrat.com/sites/strat/files/styles/optimised_image/public/images/2023-04/the-strat-exterior-new-rendering-daytime.jpg?itok=jT-5T4B_\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1464,\n        \"longitude\": -115.1554\n      },\n      \"rating\": 3.9,\n      \"description\": \"Located at the north end of the Strip, The STRAT offers good value.  The Skypod provides amazing views of the city. Rooms are decent and the location is a bit further from the main action, but easily accessible by bus or rideshare.\",\n      \"amenities\": [\"Pool\", \"Casino\", \"Restaurants\", \"Skypod Observation Deck\", \"Thrill Rides\"]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"South Strip Exploration & Free Entertainment\",\n      \"bestTimeToVisit\": \"Morning & Evening\",\n      \"plan\": [\n        {\n          \"placeName\": \"Welcome to Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign for a photo opportunity. Arrive early to avoid crowds.\",\n          \"placeImageURL\": \"https://vegasexperience.com/wp-content/uploads/2023/08/welcome-sign-las-vegas.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0829,\n            \"longitude\": -115.1736\n          },\n          \"ticketPricing\": 0,\n          \"timeToTravel\": \"Variable, depending on hotel location (allow 15-30 minutes)\",\n          \"bestTimeToVisit\": \"Early Morning (before 9 AM) for fewer crowds\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Free indoor botanical garden that changes seasonally.  A beautiful and relaxing experience.\",\n          \"placeImageURL\": \"https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/conservatory-botanical-garden/bellagio-conservatory-full-01.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1744\n          },\n          \"ticketPricing\": 0,\n          \"timeToTravel\": \"15-20 minutes from Welcome Sign by bus/rideshare\",\n          \"bestTimeToVisit\": \"Late Morning (10 AM - 12 PM) or Weekday Afternoon\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"Free water show choreographed to music.  Runs every 30 minutes in the afternoon and every 15 minutes in the evening.\",\n          \"placeImageURL\": \"https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/fountains-of-bellagio/bellagio-fountains-full-03.tif\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1125,\n            \"longitude\": -115.1742\n          },\n          \"ticketPricing\": 0,\n          \"timeToTravel\": \"Adjacent to Conservatory\",\n          \"bestTimeToVisit\": \"Evening (after sunset) for the best light and atmosphere\"\n        },\n        {\n          \"placeName\": \"Walk the Strip\",\n          \"placeDetails\": \"Soak in the atmosphere, people-watch, and window shop. Explore different hotel themes (Paris, New York-New York, etc.).\",\n          \"placeImageURL\": \"https://planetvegas.com/wp-content/uploads/2022/03/PV_StripAtNight_1920x768.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1728\n          },\n          \"ticketPricing\": 0,\n          \"timeToTravel\": \"Variable, walking distance\",\n          \"bestTimeToVisit\": \"Anytime, but best in the evening when the lights are on\"\n        },\n        {\n          \"placeName\": \"Fremont Street Experience (Downtown)\",\n          \"placeDetails\": \"Free light and sound show on a giant LED canopy.  Live music and street performers.\",\n          \"placeImageURL\": \"https://vegasexperience.com/wp-content/uploads/2022/02/FSE_Main-1.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1422\n          },\n          \"ticketPricing\": 0,\n          \"timeToTravel\": \"30-45 minutes by bus/rideshare from the Strip\",\n          \"bestTimeToVisit\": \"Evening (after sunset) for the light show (shows start at dusk and run hourly)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Nature Escape & Budget Dining\",\n      \"bestTimeToVisit\": \"Morning & Afternoon\",\n      \"plan\": [\n        {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"Scenic drive and hiking trails. Offers stunning views of the desert landscape.\",\n          \"placeImageURL\": \"https://www.redrockcanyonlv.org/wp-content/uploads/2023/03/RRC_home_bg.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1483,\n            \"longitude\": -115.4153\n          },\n          \"ticketPricing\": 20,\n          \"timeToTravel\": \"30-45 minutes by car/rideshare from the Strip\",\n          \"bestTimeToVisit\": \"Early Morning (before 10 AM) to avoid the heat and crowds, or late afternoon\"\n        },\n        {\n          \"placeName\": \"Seven Magic Mountains\",\n          \"placeDetails\": \"Public art installation featuring colorful stacked boulders.\",\n          \"placeImageURL\": \"https://sevenmagicmountains.com/wp-content/uploads/2021/10/IMG_1401-scaled.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.9713,\n            \"longitude\": -115.1931\n          },\n          \"ticketPricing\": 0,\n          \"timeToTravel\": \"30 min from Red Rock Canyon National Conservation Area\",\n          \"bestTimeToVisit\": \"Midday to Afternoon (12 PM - 3 PM)\"\n        },\n        {\n          \"placeName\": \"In-N-Out Burger\",\n          \"placeDetails\": \"Classic California burger chain, known for its fresh ingredients and affordable prices.\",\n          \"placeImageURL\": \"https://locations.in-n-out.com/Content/Locations/HomePage/In-N-Out_Restaurant_Home_Page.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0715,\n            \"longitude\": -115.1439\n          },\n          \"ticketPricing\": \"Approximately $10-15 per person\",\n          \"timeToTravel\": \"Depends on location\",\n          \"bestTimeToVisit\": \"Lunch or Dinner\"\n        }\n\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"High Roller Observation Wheel & Departure\",\n      \"bestTimeToVisit\": \"Afternoon & Evening\",\n      \"plan\": [\n        {\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"Giant observation wheel offering panoramic views of the city.\",\n          \"placeImageURL\": \"https://www.caesars.com/content/dam/clv/things-to-do/high-roller/high-roller-exterior-day.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1163,\n            \"longitude\": -115.1699\n          },\n          \"ticketPricing\": 37,\n          \"timeToTravel\": \"Walking distance from many Strip hotels\",\n          \"bestTimeToVisit\": \"Late Afternoon/Early Evening (before sunset for both daytime and nighttime views)\"\n        },\n        {\n          \"placeName\": \"LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment district located below the High Roller.\",\n          \"placeImageURL\": \"https://www.caesars.com/content/dam/clv/things-to-do/linq-promenade/the-linq-promenade-home-1920x900.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1169,\n            \"longitude\": -115.1695\n          },\n          \"ticketPricing\": 0,\n          \"timeToTravel\": \"Adjacent to the High Roller\",\n          \"bestTimeToVisit\": \"Afternoon/Evening\"\n        },\n        {\n          \"placeName\": \"Departure\",\n          \"placeDetails\": \"Head to the airport for your flight home.\",\n          \"placeImageURL\": null,\n          \"geoCoordinates\": null,\n          \"ticketPricing\": null,\n          \"timeToTravel\": \"Allow ample time to travel to the airport (at least 2-3 hours before your flight).\",\n          \"bestTimeToVisit\": null\n        }\n      ]\n    }\n  },\n  \"budgetNotes\": [\n    \"Transportation: Utilize public transportation (buses) to save on rideshare costs. Consider purchasing a day pass.\",\n    \"Food: Look for affordable dining options like fast food, food courts, and happy hour specials. Pack snacks and drinks to avoid overspending.\",\n    \"Activities: Focus on free activities like walking the Strip, watching the Bellagio fountains, and visiting free attractions.\",\n    \"Hotel: Choose a budget-friendly hotel off-strip or on the north/south end of the Strip for lower rates.\",\n    \"Gambling: Set a strict gambling budget and stick to it.\",\n    \"Consider purchasing a multi-attraction pass if you plan to visit several paid attractions.\"\n  ]\n}\n```\n\n**Key Budget Considerations:**\n\n*   **Transportation:** Public transportation (the Deuce bus) is your friend! Day passes are a good value. Walking is also a great option to explore the strip.\n*   **Food:**  Happy hours, fast food, and cheap eats are essential.  Consider bringing some snacks and drinks.\n*   **Gambling:**  Set a VERY firm budget and don't exceed it.\n*   **Free Activities:**  This itinerary is heavy on free activities.\n*   **Hotel Choice:** The hotels suggested are value-oriented. Location will be further from central, but the savings are worth it.\n\n**Important Notes:**\n\n*   **Pricing Fluctuations:** Hotel and attraction prices vary greatly depending on the time of year, day of the week, and special events.  Book in advance, especially for weekends.\n*   **Walking:** Be prepared to do a lot of walking. Wear comfortable shoes.\n*   **Hydration:** It's a desert climate. Drink plenty of water.\n*   **Flexibility:** Be willing to adjust your plans based on your interests and budget.\n*   **Check for deals:** Look for discounts on attractions and shows online (e.g., Groupon, Vegas.com).\n\nRemember to tailor this plan to your specific preferences and budget. Have a great time in Vegas!\n"},
          ],
        },
      ],
    });
  

  
  
